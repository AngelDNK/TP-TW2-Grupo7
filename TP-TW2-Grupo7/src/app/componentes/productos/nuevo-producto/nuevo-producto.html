<div class="container mx-auto p-4 max-w-lg">
  <h2 class="text-3xl font-bold mb-6 text-white">Crear Nuevo Producto</h2>

  <form [formGroup]="form" (ngSubmit)="guardar()" class="bg-white p-8 rounded-lg shadow-md space-y-6">

    <div>
      <label for="nombre" class="block text-sm font-medium text-gray-700 mb-1">Nombre del producto</label>
      <input type="text" id="nombre" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" formControlName="nombre">
      @if (form.get('nombre')?.invalid && (form.get('nombre')?.touched || form.get('nombre')?.dirty)) {
        <p class="text-red-500 text-xs mt-1">El nombre es requerido.</p>
      }
    </div>

    <div>
      <label for="descripcion" class="block text-sm font-medium text-gray-700 mb-1">Descripci贸n</label>
      <textarea id="descripcion" rows="4" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" formControlName="descripcion"></textarea>
      @if (form.get('descripcion')?.invalid && (form.get('descripcion')?.touched || form.get('descripcion')?.dirty)) {
        <p class="text-red-500 text-xs mt-1">La descripci贸n es requerida.</p>
      }
    </div>

    <div>
      <label for="clasificacion" class="block text-sm font-medium text-gray-700 mb-1">Clasificaci贸n</label>
      <input type="text" id="clasificacion" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" formControlName="clasificacion">
      @if (form.get('clasificacion')?.invalid && (form.get('clasificacion')?.touched || form.get('clasificacion')?.dirty)) {
        <p class="text-red-500 text-xs mt-1">La clasificaci贸n es requerida.</p>
      }
    </div>

    <div>
      <label for="precio" class="block text-sm font-medium text-gray-700 mb-1">Precio</label>
      <input type="number" id="precio" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" formControlName="precio">
      @if (form.get('precio')?.errors?.['required'] && (form.get('precio')?.touched || form.get('precio')?.dirty)) {
        <p class="text-red-500 text-xs mt-1">El precio es requerido.</p>
      }
      @if (form.get('precio')?.errors?.['min'] && (form.get('precio')?.touched || form.get('precio')?.dirty)) {
        <p class="text-red-500 text-xs mt-1">El precio debe ser mayor a 0.</p>
      }
    </div>

    <div>
  <label for="imagen" class="block text-sm font-medium text-gray-700 mb-1">Imagen del producto</label>
  <input
    type="file"
    id="imagen"
    accept="image/*"
    (change)="onFileSelected($event)"
    class="w-full p-2 border border-gray-300 rounded-md shadow-sm bg-white"
  />

  @if (form.get('imagen')?.invalid && (form.get('imagen')?.touched || form.get('imagen')?.dirty)) {
    <p class="text-red-500 text-xs mt-1">La imagen es requerida.</p>
  }
</div>

    <div class="flex items-center gap-4">
      <button type="submit" [disabled]="form.invalid" class="bg-blue-600 text-white px-6 py-2 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed">
        Crear Producto
      </button>
      <a routerLink="/productos" class="text-gray-600 hover:text-gray-900">
        Cancelar
      </a>
    </div>

    @if (mensaje) {
      <div class="p-4 rounded-md" [ngClass]="{
        'bg-green-100 border border-green-400 text-green-700': tipoMensaje === 'success',
        'bg-yellow-100 border border-yellow-400 text-yellow-700': tipoMensaje === 'warning',
        'bg-red-100 border border-red-400 text-red-700': tipoMensaje === 'error'
      }">
        <p>{{ mensaje }}</p>
      </div>
    }
  </form>
</div>
